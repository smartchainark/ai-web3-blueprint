# SOP: é¦–å°¾å¸§è§†é¢‘ç”Ÿæˆæµç¨‹

> åŸºäºŽ Veo 3.1 çš„ Image-to-Video ç”Ÿæˆï¼Œæ”¯æŒé¦–å°¾å¸§æ’å€¼å®žçŽ°å¹³æ»‘è¿‡æ¸¡

**æ–‡æ¡£ç¼–å·**: 022
**æ—¥æœŸ**: 2025-01-01
**æ ‡ç­¾**: `Veo` `è§†é¢‘ç”Ÿæˆ` `AIåª’ä½“` `Replicate`

---

## æ¦‚è¿°

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•ä½¿ç”¨ Google Veo 3.1 æ¨¡åž‹ï¼ŒåŸºäºŽå…³é”®å¸§å›¾ç‰‡ç”Ÿæˆå¹³æ»‘è¿‡æ¸¡çš„è§†é¢‘ã€‚æ ¸å¿ƒç‰¹æ€§æ˜¯**é¦–å°¾å¸§æ’å€¼**â€”â€”é€šè¿‡æŒ‡å®šè§†é¢‘çš„èµ·å§‹å¸§å’Œç»“æŸå¸§ï¼Œè®© AI è‡ªåŠ¨ç”Ÿæˆä¸­é—´çš„åŠ¨ç”»è¿‡æ¸¡ã€‚

---

## 1. æµç¨‹æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      é¦–å°¾å¸§è§†é¢‘ç”Ÿæˆæµç¨‹                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ å‡†å¤‡å›¾ç‰‡  â”‚ â†’ â”‚ é…ç½®å‚æ•°  â”‚ â†’ â”‚ ç”Ÿæˆè§†é¢‘  â”‚ â†’ â”‚ åŽå¤„ç†    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚       â”‚                â”‚               â”‚               â”‚                â”‚
â”‚       â†“                â†“               â†“               â†“                â”‚
â”‚  scene_001.png   video-config   Replicate API    åˆå¹¶/å¯¼å‡º             â”‚
â”‚  scene_002.png      .json       (Veo 3.1)                              â”‚
â”‚       ...                                                               â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ¦‚å¿µ

| æ¦‚å¿µ | è¯´æ˜Ž |
|------|------|
| **é¦–å¸§ (image)** | è§†é¢‘çš„èµ·å§‹ç”»é¢ï¼Œä½œä¸ºç”Ÿæˆçš„å‚è€ƒèµ·ç‚¹ |
| **å°¾å¸§ (last_frame)** | è§†é¢‘çš„ç»“æŸç”»é¢ï¼Œç”¨äºŽæ’å€¼è¿‡æ¸¡ |
| **æ’å€¼è¿‡æ¸¡** | Veo ä¼šè‡ªåŠ¨åœ¨é¦–å°¾å¸§ä¹‹é—´ç”Ÿæˆå¹³æ»‘çš„åŠ¨ç”»è¿‡æ¸¡ |
| **åœºæ™¯ (scene)** | ä¸€æ®µç‹¬ç«‹çš„è§†é¢‘ç‰‡æ®µï¼Œé€šå¸¸ 4-8 ç§’ |

### æ—¶é—´ä¼°ç®—

| æ­¥éª¤ | é¢„è®¡è€—æ—¶ | è¯´æ˜Ž |
|------|----------|------|
| å‡†å¤‡å›¾ç‰‡ | è§†æƒ…å†µ | ä½¿ç”¨ Midjourney/DALL-E ç”Ÿæˆ |
| é…ç½®å‚æ•° | 5 åˆ†é’Ÿ | ç¼–å†™ JSON é…ç½® |
| ç”Ÿæˆè§†é¢‘ | 2-5 åˆ†é’Ÿ/åœºæ™¯ | Replicate API è°ƒç”¨ |
| åŽå¤„ç† | 10-30 åˆ†é’Ÿ | å‰ªè¾‘ã€åˆå¹¶ã€é…ä¹ |

---

## 2. å‰ç½®å‡†å¤‡

### 2.1 çŽ¯å¢ƒè¦æ±‚

```bash
# Node.js ç‰ˆæœ¬
node -v  # >= 18.0.0

# å®‰è£…ä¾èµ–
pnpm install replicate
```

### 2.2 API é…ç½®

åˆ›å»ºé…ç½®æ–‡ä»¶ `config.json`ï¼š

```json
{
  "REPLICATE_API_TOKEN": "r8_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
}
```

### 2.3 ç›®å½•ç»“æž„

```
your-project/
â”œâ”€â”€ storyboard/
â”‚   â””â”€â”€ frames/           # å…³é”®å¸§å›¾ç‰‡ç›®å½•
â”‚       â”œâ”€â”€ scene_001.png
â”‚       â”œâ”€â”€ scene_002.png
â”‚       â””â”€â”€ ...
â”œâ”€â”€ video/                # ç”Ÿæˆçš„è§†é¢‘ç›®å½•
â”‚   â”œâ”€â”€ scene_001.mp4
â”‚   â””â”€â”€ ...
â””â”€â”€ video-config.json     # è§†é¢‘é…ç½®æ–‡ä»¶
```

### 2.4 æ£€æŸ¥æ¸…å•

- [ ] Replicate API Token å·²é…ç½®
- [ ] å…³é”®å¸§å›¾ç‰‡å·²å‡†å¤‡ï¼ˆ16:9ï¼Œ1280x720 æˆ–æ›´é«˜ï¼‰
- [ ] å›¾ç‰‡å‘½åè§„èŒƒï¼š`scene_001.png`, `scene_002.png` ...
- [ ] å·²äº†è§£æ¯ä¸ªåœºæ™¯çš„å†…å®¹å’Œè¿‡æ¸¡éœ€æ±‚

---

## 3. å‡†å¤‡å…³é”®å¸§å›¾ç‰‡

### 3.1 å›¾ç‰‡è§„æ ¼è¦æ±‚

| å‚æ•° | æŽ¨èå€¼ | è¯´æ˜Ž |
|------|--------|------|
| å®½é«˜æ¯” | 16:9 æˆ– 9:16 | ä¸Žç›®æ ‡è§†é¢‘ä¸€è‡´ |
| åˆ†è¾¨çŽ‡ | 1280x720 æˆ– 1920x1080 | æ›´é«˜åˆ†è¾¨çŽ‡æ•ˆæžœæ›´å¥½ |
| æ ¼å¼ | PNG / JPG | PNG ä¿ç•™æ›´å¤šç»†èŠ‚ |
| é£Žæ ¼ | ç»Ÿä¸€ | ç¡®ä¿åœºæ™¯é—´é£Žæ ¼ä¸€è‡´ |

### 3.2 å›¾ç‰‡å‘½åè§„èŒƒ

```
scene_{ç¼–å·}.png      # å¸¸è§„åœºæ™¯é¦–å¸§
scene_{ç¼–å·}_end.png  # æ˜¾å¼æŒ‡å®šçš„åœºæ™¯å°¾å¸§ï¼ˆå¯é€‰ï¼‰

ç¤ºä¾‹ï¼š
scene_001.png         # åœºæ™¯1çš„é¦–å¸§
scene_002.png         # åœºæ™¯2çš„é¦–å¸§ï¼ˆåŒæ—¶ä½œä¸ºåœºæ™¯1çš„å°¾å¸§ï¼‰
scene_003.png         # åœºæ™¯3çš„é¦–å¸§ï¼ˆåŒæ—¶ä½œä¸ºåœºæ™¯2çš„å°¾å¸§ï¼‰
```

### 3.3 é¦–å°¾å¸§é€»è¾‘

è„šæœ¬è‡ªåŠ¨å¤„ç†é¦–å°¾å¸§çš„å¯¹åº”å…³ç³»ï¼š

```
åœºæ™¯1: é¦–å¸§ = scene_001.png â†’ å°¾å¸§ = scene_002.png
åœºæ™¯2: é¦–å¸§ = scene_002.png â†’ å°¾å¸§ = scene_003.png
åœºæ™¯3: é¦–å¸§ = scene_003.png â†’ å°¾å¸§ = scene_004.png
...
åœºæ™¯N: é¦–å¸§ = scene_N.png   â†’ å°¾å¸§ = æ— ï¼ˆæœ€åŽä¸€ä¸ªåœºæ™¯ï¼‰
```

**é‡è¦**ï¼šå¦‚æžœä½¿ç”¨ `--only` å‚æ•°ç­›é€‰åœºæ™¯ï¼Œéœ€è¦åŒ…å«ç›¸é‚»åœºæ™¯æ‰èƒ½æ­£ç¡®è®¾ç½®å°¾å¸§ï¼

```bash
# âŒ é”™è¯¯ï¼šåªç­›é€‰ä¸€ä¸ªåœºæ™¯ï¼Œæ— æ³•èŽ·å–å°¾å¸§
--only=006

# âœ… æ­£ç¡®ï¼šåŒ…å«ç›¸é‚»åœºæ™¯ï¼Œèƒ½æ­£ç¡®è®¾ç½®é¦–å°¾å¸§
--only=006,007
```

---

## 4. é…ç½®è§†é¢‘å‚æ•°

### 4.1 é…ç½®æ–‡ä»¶ç»“æž„

åˆ›å»º `video-config.json`ï¼š

```json
{
  "project_id": "promo-video",
  "project_info": {
    "title": "é¡¹ç›®å®£ä¼ è§†é¢‘",
    "description": "åŸºäºŽå…³é”®å¸§ç”Ÿæˆè¿žè´¯çš„è¿‡æ¸¡è§†é¢‘",
    "style_token": "premium futuristic, cinematic lighting, smooth camera movement"
  },
  "technical_recommendations": {
    "model": "google/veo-3.1-fast",
    "resolution": "1080p",
    "aspect_ratio": "16:9"
  },
  "scenes": [
    {
      "id": "001",
      "prompt": "åœºæ™¯æè¿°ï¼Œé•œå¤´è¿åŠ¨ï¼Œæ°›å›´...",
      "duration": 4
    },
    {
      "id": "002",
      "prompt": "åœºæ™¯æè¿°...",
      "duration": 6
    }
  ]
}
```

### 4.2 åœºæ™¯é…ç½®å‚æ•°

| å‚æ•° | ç±»åž‹ | è¯´æ˜Ž |
|------|------|------|
| `id` | string | åœºæ™¯ç¼–å·ï¼Œä¸Žå›¾ç‰‡å‘½åå¯¹åº” |
| `prompt` | string | è§†é¢‘åŠ¨ç”»æè¿° |
| `duration` | number | è§†é¢‘æ—¶é•¿ï¼ˆ4/6/8 ç§’ï¼‰ |
| `reference_images` | array | R2V æ¨¡å¼çš„å‚è€ƒå›¾åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰ |

### 4.3 Prompt ç¼–å†™æŠ€å·§

**å¥½çš„ Prompt ç»“æž„**ï¼š
```
[ä¸»ä½“åŠ¨ä½œ] + [é•œå¤´è¿åŠ¨] + [æ°›å›´/å…‰æ•ˆ] + [è¿‡æ¸¡æè¿°]

ç¤ºä¾‹ï¼š
"AI core stabilizes at center. Energy flow slows down gradually.
Purple gradients deepen. Strong sense of security and trust.
Camera holds steady. Minimal motion, maximum calm."
```

**å…³é”®å…ƒç´ **ï¼š
- åŠ¨ä½œæè¿°ï¼š`pulses`, `flows`, `converges`, `stabilizes`
- é•œå¤´è¿åŠ¨ï¼š`camera slow push-in`, `orbits slightly`, `holds steady`
- æ°›å›´è¯ï¼š`cinematic`, `elegant`, `smooth`, `calm`
- è¿‡æ¸¡è¯ï¼š`transition to`, `fade`, `merge into`

---

## 5. æ‰§è¡Œè§†é¢‘ç”Ÿæˆ

### 5.1 åŸºæœ¬å‘½ä»¤

```bash
# è®¾ç½®è¾“å‡ºç›®å½•å¹¶æ‰§è¡Œç”Ÿæˆ
CUSTOM_OUTPUT_DIR="/path/to/project" \
node generate-veo-video.js \
  --config=video-config.json
```

### 5.2 å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | è¯´æ˜Ž | ç¤ºä¾‹ |
|------|------|------|
| `--config=` | é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆå¿…éœ€ï¼‰ | `--config=./video-config.json` |
| `--only=` | ä»…ç”ŸæˆæŒ‡å®šåœºæ™¯ | `--only=006,007` |
| `--force` | å¼ºåˆ¶è¦†ç›–å·²å­˜åœ¨çš„è§†é¢‘ | `--force` |
| `--mock` | æ¨¡æ‹Ÿæ¨¡å¼ | `--mock` |
| `--hailuo` | ä½¿ç”¨ Hailuo æ¨¡åž‹ | `--hailuo` |
| `--model=` | æŒ‡å®šæ¨¡åž‹ ID | `--model=google/veo-3.1` |

### 5.3 å¸¸ç”¨åœºæ™¯å‘½ä»¤

**ç”Ÿæˆå…¨éƒ¨åœºæ™¯**ï¼š
```bash
CUSTOM_OUTPUT_DIR="/path/to/project" \
node generate-veo-video.js --config=video-config.json
```

**é‡æ–°ç”Ÿæˆç‰¹å®šåœºæ™¯ï¼ˆå¸¦é¦–å°¾å¸§ï¼‰**ï¼š
```bash
CUSTOM_OUTPUT_DIR="/path/to/project" \
node generate-veo-video.js \
  --config=video-config.json \
  --only=006,007 \
  --force
```

### 5.4 é¢„æœŸè¾“å‡º

```
ðŸ“– åŠ è½½é…ç½®: video-config.json
   ðŸŽ¯ ä»…ç”Ÿæˆåœºæ™¯: 006, 007
   Output Dir: /path/to/project/video
   Storyboard Dir: /path/to/project/storyboard/frames

ðŸŽï¸  å¯åŠ¨ç”Ÿæˆé˜Ÿåˆ— (Concurrency: 2)...

ðŸŽ¬ [Scene 006] å‡†å¤‡ç”Ÿæˆ (google/veo-3.1-fast)...
   ðŸ–¼ï¸  [Scene 006] é¦–å¸§: scene_006.png
   ðŸ”— [Scene 006] å°¾å¸§: scene_007.png (æ’å€¼è¿‡æ¸¡)
   ðŸš€ æäº¤ä»»åŠ¡ç»™ Replicate...
   âœ… [Scene 006] ç”ŸæˆæˆåŠŸ!

ðŸŽ‰ æ‰€æœ‰è§†é¢‘ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼
```

---

## 6. è§†é¢‘åŽå¤„ç†

### 6.1 è§†é¢‘åˆå¹¶

ä½¿ç”¨ FFmpeg åˆå¹¶å¤šä¸ªåœºæ™¯ï¼š

```bash
# åˆ›å»ºæ–‡ä»¶åˆ—è¡¨
cat > filelist.txt << EOF
file 'scene_001.mp4'
file 'scene_002.mp4'
file 'scene_003.mp4'
EOF

# åˆå¹¶è§†é¢‘
ffmpeg -f concat -safe 0 -i filelist.txt -c copy output.mp4
```

### 6.2 æ·»åŠ èƒŒæ™¯éŸ³ä¹

```bash
ffmpeg -i output.mp4 -i bgm.mp3 \
  -c:v copy -c:a aac \
  -map 0:v:0 -map 1:a:0 \
  -shortest \
  final_video.mp4
```

### 6.3 æ ¼å¼è½¬æ¢

```bash
# è½¬æ¢ä¸º WebM
ffmpeg -i final_video.mp4 -c:v libvpx-vp9 -crf 30 -b:v 0 output.webm

# è½¬æ¢ä¸º MOV
ffmpeg -i final_video.mp4 -c:v prores_ks -profile:v 3 output.mov
```

---

## 7. é«˜çº§ç”¨æ³•

### 7.1 R2V æ¨¡å¼ï¼ˆReference-to-Videoï¼‰

Veo 3.1 æ ‡å‡†ç‰ˆæ”¯æŒå¤šå›¾å‚è€ƒæ¨¡å¼ï¼š

```json
{
  "id": "003",
  "prompt": "åœºæ™¯æè¿°...",
  "reference_images": [
    "reference_style_01.png",
    "reference_style_02.png"
  ]
}
```

**R2V æ¨¡å¼ç‰¹æ€§**ï¼š
- æœ€å¤šæ”¯æŒ 2 å¼ å‚è€ƒå›¾
- ç¬¬ä¸€å¼ è‡ªåŠ¨ä½œä¸ºé¦–å¸§
- æœ€åŽä¸€å¼ è‡ªåŠ¨ä½œä¸ºå°¾å¸§
- å¼ºåˆ¶ 8 ç§’æ—¶é•¿ã€16:9 æ¯”ä¾‹

### 7.2 æ˜¾å¼å°¾å¸§

åˆ›å»º `scene_XXX_end.png` æŒ‡å®šç‰¹å®šçš„ç»“æŸç”»é¢ï¼š

```
storyboard/frames/
â”œâ”€â”€ scene_006.png      # åœºæ™¯6é¦–å¸§
â”œâ”€â”€ scene_006_end.png  # åœºæ™¯6æ˜¾å¼å°¾å¸§
â””â”€â”€ scene_007.png      # åœºæ™¯7é¦–å¸§
```

---

## 8. å¸¸è§é—®é¢˜

### Q1: åœºæ™¯é—´è¿‡æ¸¡ä¸å¹³æ»‘ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®ä¿ç›¸é‚»åœºæ™¯çš„å…³é”®å¸§é£Žæ ¼ä¸€è‡´
2. åœ¨ prompt ä¸­åŠ å…¥è¿‡æ¸¡æè¿°è¯
3. ä½¿ç”¨ä¸­é—´å¸§ä½œä¸ºè¿‡æ¸¡

### Q2: ç”Ÿæˆçš„è§†é¢‘æ²¡æœ‰ä½¿ç”¨å°¾å¸§ï¼Ÿ

**åŽŸå› **: ä½¿ç”¨ `--only` ç­›é€‰æ—¶åªåŒ…å«äº†å•ä¸ªåœºæ™¯ã€‚

**è§£å†³æ–¹æ¡ˆ**: åŒ…å«ç›¸é‚»åœºæ™¯ `--only=006,007`

### Q3: API è°ƒç”¨å¤±è´¥ï¼Ÿ

| é”™è¯¯ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| `Invalid API token` | æ£€æŸ¥ config.json |
| `Model not found` | ä½¿ç”¨æ­£ç¡®çš„æ¨¡åž‹å |
| `Rate limit exceeded` | ç­‰å¾…åŽé‡è¯• |

---

## 9. é™„å½•

### 9.1 Veo 3.1 æ¨¡åž‹å¯¹æ¯”

| æ¨¡åž‹ | ID | é€Ÿåº¦ | R2V æ”¯æŒ |
|------|-----|------|----------|
| Veo 3.1 Fast | `google/veo-3.1-fast` | å¿« | âŒ |
| Veo 3.1 Standard | `google/veo-3.1` | è¾ƒæ…¢ | âœ… |
| Hailuo 2.3 Fast | `minimax/hailuo-2.3-fast` | å¿« | âŒ |

### 9.2 å‚æ•°é€ŸæŸ¥è¡¨

| å‚æ•° | å¯é€‰å€¼ | é»˜è®¤å€¼ |
|------|--------|--------|
| `duration` | 4, 6, 8 | 8 |
| `resolution` | 720p, 1080p | 1080p |
| `aspect_ratio` | 16:9, 9:16 | 16:9 |
| `generate_audio` | true, false | true |

---

## å‚è€ƒèµ„æº

- [Replicate Veo 3.1 æ–‡æ¡£](https://replicate.com/google/veo-3.1-fast)
- [FFmpeg æ–‡æ¡£](https://ffmpeg.org/documentation.html)
